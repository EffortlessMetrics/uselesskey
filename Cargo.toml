[workspace]
resolver = "2"
members = [
  "crates/uselesskey",
  "crates/uselesskey-core",
  "crates/uselesskey-rsa",
  "crates/uselesskey-bdd",
  "xtask",
]
exclude = ["fuzz"]

[workspace.package]
edition = "2021"
license = "MIT OR Apache-2.0"
rust-version = "1.88"
repository = "https://github.com/EffortlessMetrics/uselesskey"
authors = ["Effortless Metrics <opensource@effortlessmetrics.com>"]

[workspace.dependencies]
# error handling
thiserror = "1"

# determinism / hashing
blake3 = "1"

# concurrency-friendly cache
dashmap = "5"

# RNG
rand = "0.8"
rand_core = "0.6"
rand_chacha = "0.3"

# sinks
tempfile = "3"

# testing
proptest = "1"
rstest = "0.21"

# CLI helpers (xtask)
anyhow = "1"
clap = { version = "4", features = ["derive"] }

# BDD
cucumber = { version = "0.22", features = ["macros"] }
tokio = { version = "1", features = ["macros", "rt-multi-thread"] }

# RSA
rsa = { version = "0.9", features = ["pem"] }

# optional JWK helpers
serde = { version = "1", features = ["derive"] }
serde_json = "1"
base64 = "0.21"

[profile.dev]
# RSA keygen can be slow in debug; modest opt helps without full release build.
opt-level = 1

[profile.test]
opt-level = 1
